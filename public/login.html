<!DOCTYPE html>

<html>

    <head>
        <meta charset="utf-8">
        <title>Login</title>
        
        <script src="jquery.js"></script>
        <link href="appstyle.css" rel="stylesheet" type="text/css">
        <link href="font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="bootstrap.min.css">
        <link rel="stylesheet" href="pure-min.css">
        <script src="bootstrap.min.js"></script>
        <!--<script src="loginLoader.js"></script>-->
        <script type = "text/javascript" language = "javascript">
			urlString = "http://myhealthapp.herokuapp.com/api/5401/login?first_name=Sebastian&last_name=Bernhart";
			$(document).ready(function() {
				$.getJSON(
						urlString,
						function(data) {
							alert("howdy");
							alert(data.status);
						}
				);
			});

			//Initialize domain name variable
			if (document.location.hostname === 'localhost') {
				var domainName = "http://" + document.location.hostname + ":9090"; //http:localhost:9090
			}
			else {
				var domainName = "http://" + document.location.host; //http:domain
				if (domainName.indexOf(":8181") > -1) {
					domainName = domainName.replace("8181", "9090");
				}
			}
			
			localStorage.setItem("currentSize","30");

			function attemptLogin()
			{   
			  $(document).ready(function() {
				var first_name = document.getElementById("first-name").value;
				var last_name = document.getElementById("last-name").value;
				var patient_ID = document.getElementById("patient-id").value;
				$.getJSON(
						"http://myhealthapp.herokuapp.com/api/" +patient_ID+"/login?first_name=" + first_name +"&last_name=" +last_name,
						function(data) {
							alert("howdy 2");
							alert(data.status);
							window.location.href = "http://myhealthapp.herokuapp.com/index.html";
						}
				);
			});
		
			}
  
			function changeSize() 
			{
				  if(localStorage.getItem("currentSize") === "30")
				  {
					  localStorage.setItem("currentSize", "100");
					  $("#collapseFooter").css('height', '100px');
					  $("#collapseFooter").toggleClass('fa-angle-up fa-angle-down');
				  }
				  else
				  {
					  localStorage.setItem("currentSize", "30");
						$("#collapseFooter").css('height', '30px');
						$("#collapseFooter").toggleClass('fa-angle-down fa-angle-up');
				  }
		    }
        </script>
  
    </head>
    <body>
        <div id="landingBar">
            <i id="hand-icon" class="fa fa-hand-paper-o"></i>
            <span  id="landingText">Skin Diagnosis</span>
        </div>

                <form id="login-form" class="pure-form">
                    <fieldset>

                            <p id="loginTitle" class="fa fa-lock">  Secure Login</p>
                            <div style="margin-top: 8px;margin-left: 13px;" class="pure-u-1 pure-u-md-1-3">
                                <label for="first-name">First Name</label>
                                <input style="color:black;" id="first-name" class="pure-u-23-24" type="text">
                            </div>

                            <div style="margin-top: 8px;margin-left: 13px;" class="pure-u-1 pure-u-md-1-3">
                                <label for="last-name">Last Name</label>
                                <input style="color:black;" id="last-name" class="pure-u-23-24" type="text">
                            </div>

                            <div style="margin-top: 8px;margin-left: 13px;" class="pure-u-1 pure-u-md-1-3">
                                <label for="password">Patient ID</label>
                                <input style="color:black;" id="patient-id" class="pure-u-23-24" type="text" required>
                            </div>

                        <button style="width:96%;margin-top: 18px;margin-left: 13px;" onclick="attemptLogin()" type="submit" class="pure-button pure-button-primary">Login</button>
                    </fieldset>
                </form>

        <button id="collapseFooter" type="button" class="btn btn-info fa fa-angle-up" onclick="changeSize()" data-toggle="collapse" data-target="#collapseContent"> This is a secure application</button>
        <div id="collapseContent" class="collapse">
          The purpose of this application is to provide a resource outside of a doctor visit to asses a skin
          condition.  Communications with your physician will only be made if you decide to pursue them.
          Any diagnosis provided by the application is not approved by a licensed medical professional.
        </div>

    </body>

</html>
